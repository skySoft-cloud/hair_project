<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>密发网</title>
    <link rel="stylesheet" href="../style/bootstrap.min.css">
    <link rel="stylesheet" href="../style/all.css">
</head>
<body>
<div class="container-fluid mb-5">
    <div class="row mt-3">
        <div class="col-md-12 d-flex">
            <!--logo-->
            <div class="col-md-3 offset-md-1">
                <img class="logo-img" src="../img/logo.jpg" alt="logo">
            </div>
            <!--联系方式-->
            <div class="col-md-7 d-flex flex-column align-items-end">
                <p>TEL:15828171726</p>
                <p>QQ:1046568540</p>
            </div>
        </div>
    </div>
    <div id="show_content">
        <!--轮播图-->
        <div class="row mt-3">
            <div class="col-md-12">
                <div id="hair_slider" class="carousel slide" data-ride="carousel">
                    <!-- 指示符 -->
                    <ul class="carousel-indicators">
                        <li data-target="#hair_slider" data-slide-to="0" class="active"></li>
                        <li data-target="#hair_slider" data-slide-to="1"></li>
                        <li data-target="#hair_slider" data-slide-to="2"></li>
                    </ul>
                    <!-- 轮播图片 -->
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="../img/banner1.jpg">
                        </div>
                        <div class="carousel-item">
                            <img src="../img/banner1.jpg">
                        </div>
                        <div class="carousel-item">
                            <img src="../img/banner1.jpg">
                        </div>
                    </div>
                    <!-- 左右切换按钮 -->
                    <a class="carousel-control-prev" href="#hair_slider" data-slide="prev">
                        <span class="carousel-control-prev-icon"></span>
                    </a>
                    <a class="carousel-control-next" href="#hair_slider" data-slide="next">
                        <span class="carousel-control-next-icon"></span>
                    </a>
                </div>
            </div>
        </div>
        <!--服务事项-->
        <div class="row mt-3">
            <div class="col-md-10 m-auto d-flex justify-content-between flex-wrap pt-4 pb-4">
                <div class="demo-card mt-3 d-flex flex-column align-items-center">
                    <img src="../img/hair1.jpg" alt="发际线">
                    <span>发际线</span>
                </div>
                <div class="demo-card mt-3 d-flex flex-column align-items-center">
                    <img src="../img/hair2.jpg" alt="头发稀疏">
                    <span>头发稀疏</span>
                </div>
                <div class="demo-card mt-3 d-flex flex-column align-items-center">
                    <img src="../img/hair3.jpg" alt="植发">
                    <span>植发</span>
                </div>
                <div class="demo-card mt-3 d-flex flex-column align-items-center">
                    <img src="../img/hair4.jpg" alt="植眉">
                    <span>植眉</span>
                </div>
                <div class="demo-card mt-3 d-flex flex-column align-items-center">
                    <img src="../img/hair5.jpg" alt="男性秃顶">
                    <span>男性秃顶</span>
                </div>
                <div class="demo-card mt-3 d-flex flex-column align-items-center">
                    <img src="../img/hair6.jpg" alt="男性脱发">
                    <span>男性脱发</span>
                </div>
                <div class="demo-card mt-3 d-flex flex-column align-items-center">
                    <img src="../img/hair7.jpg" alt="疤痕植发">
                    <span>疤痕植发</span>
                </div>
                <div class="demo-card mt-3 d-flex flex-column align-items-center">
                    <img src="../img/hair8.jpg" alt="私密种植">
                    <span>私密种植</span>
                </div>
                <div class="demo-card mt-3 d-flex flex-column align-items-center">
                    <img src="../img/hair9.jpg" alt="胡须种植">
                    <span>胡须种植</span>
                </div>
            </div>
        </div>
        <!--热点文章-->
        <div class="row mt-3">
            <div id="hot_article_section" class="col-md-10 m-auto bg-light pt-4 pb-4">
                <h6 class="pl-2">热点文章</h6>
                <div id="article_container" class="d-flex flex-wrap justify-content-start mt-3">
                    <!--<div class="col-md-3 text-left mt-2">-->
                    <!--<a href="">植发可以用别人的毛囊吗？</a>-->
                    <!--</div>-->
                    <!--<div class="col-md-3 text-left mt-2">-->
                    <!--<a href="">植发几大注意点</a>-->
                    <!--</div>-->
                    <!--<div class="col-md-3 text-left mt-2">-->
                    <!--<a href="">防脱发的秘诀</a>-->
                    <!--</div>-->
                    <!--<div class="col-md-3 text-left mt-2">-->
                    <!--<a href="">生活中的方式</a>-->
                    <!--</div>-->
                    <!--<div class="col-md-3 text-left mt-2">-->
                    <!--<a href="">防脱发的秘诀</a>-->
                    <!--</div>-->
                    <!--<div class="col-md-3 text-left mt-2">-->
                    <!--<a href="">植发几大注意点</a>-->
                    <!--</div>-->
                    <!--<div class="col-md-3 text-left mt-2">-->
                    <!--<a href="">防脱发的秘诀</a>-->
                    <!--</div>-->
                    <!--<div class="col-md-3 text-left mt-2">-->
                    <!--<a href="">植发可以用别人的毛囊吗？</a>-->
                    <!--</div>-->
                </div>
            </div>
            <div class="js-show-pagination col-md-10 m-auto bg-light pt-4 pb-4 display-none">
                <nav aria-label="Page navigation">
                    <ul class="pagination d-flex justify-content-end">
                        <li id="prev" class="page-item"><a class="page-link text-center">上一页</a></li>
                        <li id="next" class="page-item"><a class="page-link text-center">下一页</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <!--头发疏密示意图-->
        <div class="row mt-3">
            <div class="col-md-10 m-auto bg-light pt-4 pb-4">
                <h6 class="pl-2">头发疏密示意图</h6>
                <div class="col-md-12 d-flex flex-column justify-content-between">
                    <div>
                        <img src="../img/hairdown3.jpg" style="width: 100%" alt="">
                    </div>
                    <p style="margin-top: 20px">脱发原因分析：
                        脱发是头发脱落的现象，有生理性及病理性之分。生理性脱发指头发正常的脱落。病理性脱发是指头发异常或过度的脱落。
                        随着社会压力不断增大和生活节奏的加快，环境的不断恶化，以及不良饮食的饮食习惯，伴随我们的非健康、
                        亚健康也与日俱增，脱发患者越来越多。其中脂溢性脱发占比最高。</p>
                </div>
            </div>
        </div>
        <!--专家团队-->
        <div class="row mt-3">
            <div class="col-md-10 m-auto bg-light pt-4 pb-4">
                <h6 class="pl-2">专家团队</h6>
                <div class="col-md-10 m-auto d-flex justify-content-between flex-wrap pt-4 pb-4">
                    <div class="demo-card1 mt-3 d-flex flex-column align-items-center">
                        <span>关心患者</span>
                        <img src="../img/pfo1.jpg" alt="关心患者">
                        <p>每个医护人员的规范操作，不对毛囊进行机械损伤，增加存活率。</p>
                    </div>
                    <div class="demo-card1 mt-3 d-flex flex-column align-items-center">
                        <span>技术熟练</span>
                        <img src="../img/pro2.jpg" alt="技术熟练">
                        <p>所有的医护人员都必须技术熟练，保证效率更高，短时间内移植，保证存活率。</p>
                    </div>
                    <div class="demo-card1 mt-3 d-flex flex-column align-items-center">
                        <span>服务一流</span>
                        <img src="../img/pro3.jpg" alt="服务一流">
                        <p>一流服务团队为你提供一流服务。</p>
                    </div>
                    <div class="demo-card1 mt-3 d-flex flex-column align-items-center">
                        <span>责任心强</span>
                        <img src="../img/pro4.jpg" alt="责任心强">
                        <p>积极发扬团队协作精神，规范有序做好每一个步骤。</p>
                    </div>
                </div>
            </div>
        </div>
        <!--植发案例-->
        <div class="row mt-3">
            <div class="col-md-10 m-auto bg-light pt-4 pb-4">
                <h6 class="pl-2">植发案例</h6>
                <div class="col-md-12 mt-4 d-flex hair-demo flex-wrap justify-content-between">
                    <div class="col-md-3 d-flex flex-column align-items-center">
                        <img src="../img/de1.jpg" alt="">
                        <p>植发案例</p>
                    </div>
                    <div class="col-md-3 d-flex flex-column align-items-center">
                        <img src="../img/de2.jpg" alt="">
                        <p>植发案例</p>
                    </div>
                    <div class="col-md-3 d-flex flex-column align-items-center">
                        <img src="../img/de3.jpg" alt="">
                        <p>植发案例</p>
                    </div>
                    <div class="col-md-3 d-flex flex-column align-items-center">
                        <img src="../img/de4.jpg" alt="">
                        <p>植发案例</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="row mt-3">
        <div class="col-md-10 m-auto d-flex flex-column align-items-center justify-content-center">
            <span>Power by Chengdu Step Network technology co.,Ltd.</span>
            <span> Copyright©2016</span>
        </div>
    </footer>
</div>


<script type="text/javascript" src="../script/jquery-3.3.1.min.js"></script>
<!--<script type="text/javascript" src="../script/popover.js"></script>-->
<!--<script src="https://cdn.bootcss.com/popper.js/1.12.5/umd/popper.min.js"></script>-->
<script type="text/javascript" src="../script/bootstrap.min.js"></script>
<script type="text/javascript" src="../script/global.js"></script>
<script type="text/javascript">
    (function ($, win) {

        var getHotArticle,
                pageTurningEvent,
                clickArticle,
                global = {
                    init_article_data: [],
                    init_page: 1
                };

        /**
         * 获取热点文章列表并显示
         */
        getHotArticle = function () {
            // 发起ajax请求文章列表数据
            $.ajax({
                url: 1 == 0 ? "/fair/article/list" : "../test/getArticle",
                type: "POST",
                // 成功后处理
                success: function (res_data) {
                    // 获取文章列表数据
                    var json_date = JSON.parse(res_data),
                            article_data = json_date["data"]["articleList"];
                    // 保存下来初始数据
                    global["init_article_data"] = article_data;
                    Global["init_article_data"] = article_data;
                    // 1. 如果文章条目小于等于16条，就直接显示在页面并且不显示分页按钮
                    if (article_data.length <= 16) {
                        renderList(article_data);
                    } else {
                        // 2.如果文章条目大于16条，显示分页按钮
                        var one_page_article = article_data.slice(0, 16);
                        global.max_page = Number.isInteger(global.init_article_data.length / 16) ? (global.init_article_data.length / 16) : (Math.floor(global.init_article_data.length / 16) + 1);
                        renderList(one_page_article);
                        $(".js-show-pagination").show();
                    }
                }
            })
        };

        /**
         * 点击上一页、下一页
         */
        pageTurningEvent = function () {
            $("#prev").on("click", function () {
                // 如果当前页数是第一页，就不用重新渲染
                if (global.init_page == 1) {
                    return false;
                } else {
                    // 当前不是第一页，就 -1
                    global.init_page -= 1;
                    freshList();
                }
            });
            $("#next").on("click", function () {
                // 如果当前页数是最后一页，就不用重新渲染
                if (global.init_page == global.max_page) {
                    return false;
                } else {
                    // 当前不是第一页，就 +1
                    global.init_page += 1;
                    freshList();
                }
            });
        };

        /**
         * 点击文章列表
         */
        clickArticle = function () {
            $("#article_container").on("click", "div", function () {
                Global.id = this.id;
                $.ajax({
                    url: 1 == 0 ? ("/fair/article/list?" + this.id) : "../test/getArticleDetails",
                    type: "GET",
                    // 成功后处理
                    success: function (res_data) {
                        var json_data = JSON.parse(res_data)
                        Global.article = json_data["data"]["article"];
                        $("#show_content").load("article.html");
                    }
                })
            })

        };

        getHotArticle();
        pageTurningEvent();
        clickArticle();

        /**
         * 刷新文章列表的方法
         */
        function freshList() {
            // 根据页数显示获取当前的文章列表
            var cur_article_data = global.init_article_data.slice((global.init_page * 16) - 16, global.init_page * 16);
            // 渲染文章页面
            renderList(cur_article_data)
        }

        /**
         * 渲染文章列表的方法
         * @param render_data 需要渲染的数据
         */
        function renderList(render_data) {
            var article_str = "",
                    $article_container = $("#article_container");
            render_data.forEach(function (list_item) {
                article_str += '<div id="' + list_item["articleId"] + '" class="col-md-3 text-left mt-2">'
                        + '<a href="javascript:void(0);">' + list_item['articleName'] + '</a>'
                        + '</div>'
            });
            // 清空当前文章列表
            $article_container.empty();
            $article_container.append(article_str);
        }

    })($, window)
</script>
</body>
</html>